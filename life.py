import streamlit as st
import matplotlib.pyplot as plt
import numpy as np

# –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏
def calculate_life_expectancy(age, bmi, smoking, alcohol, steps, stress):
    max_life_expectancy = 95  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑–º–æ–∂–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç - –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ä–µ–¥–Ω–µ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏ –≤ –†–§
    base_life_expectancy = 85  # –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–∏

    # –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    life_expectancy = base_life_expectancy - (age - 40) * 0.5  # –í–æ–∑—Ä–∞—Å—Ç —Å–Ω–∏–∂–∞–µ—Ç –±–∞–∑—É

    # –§–∞–∫—Ç–æ—Ä—ã –ø–æ BMI
    if bmi < 18.5:
        life_expectancy -= 5  # –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –≤–µ—Å–∞ —Å–Ω–∏–∂–∞–µ—Ç
    elif 18.5 <= bmi < 24.9:
        life_expectancy += 2  # –ù–æ—Ä–º–∞–ª—å–Ω—ã–π BMI —É–ª—É—á—à–∞–µ—Ç
    elif 25 <= bmi < 29.9:
        life_expectancy -= 3  # –ò–∑–±—ã—Ç–æ—á–Ω—ã–π –≤–µ—Å —Å–Ω–∏–∂–∞–µ—Ç
    elif bmi >= 30:
        life_expectancy -= 6  # –û–∂–∏—Ä–µ–Ω–∏–µ —Å–∏–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç

    # –ö—É—Ä–µ–Ω–∏–µ
    if smoking == "–î–∞":
        life_expectancy -= 10  # –ö—É—Ä–µ–Ω–∏–µ ‚Äî –±–æ–ª—å—à–æ–π –º–∏–Ω—É—Å

    # –ê–ª–∫–æ–≥–æ–ª—å
    if alcohol == "–î–∞":
        life_expectancy -= 5  # –ê–ª–∫–æ–≥–æ–ª—å —Å–Ω–∏–∂–∞–µ—Ç

    # –®–∞–≥–∏
    if steps < 5000:
        life_expectancy -= 3  # –ú–∞–ª–æ–ø–æ–¥–≤–∏–∂–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏
    elif 8000 <= steps <= 12000:
        life_expectancy += 2  # –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–≤—ã—à–∞–µ—Ç

        # –°—Ç—Ä–µ—Å—Å
    if stress <= 3:
        life_expectancy += (3 - stress) * 1  # –ù–∏–∑–∫–∏–π —Å—Ç—Ä–µ—Å—Å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç
    elif 4 <= stress <= 7:
        life_expectancy -= (stress - 3) * 0.5  # –°—Ä–µ–¥–Ω–∏–π —Å—Ç—Ä–µ—Å—Å —Å–ª–µ–≥–∫–∞ —Å–Ω–∏–∂–∞–µ—Ç
    else:
        life_expectancy -= (stress - 7) * 3  # –í—ã—Å–æ–∫–∏–π —Å—Ç—Ä–µ—Å—Å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç

    # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    life_expectancy = max(0, min(max_life_expectancy, life_expectancy))

    return round(life_expectancy, 1)

# Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
st.title("–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏")

# –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
age = st.slider("–í–∞—à –≤–æ–∑—Ä–∞—Å—Ç", 18, 100, 30)
weight = st.number_input("–í–∞—à –≤–µ—Å (–≤ –∫–≥)", min_value=30, max_value=200, value=70, step=1)
height = st.number_input("–í–∞—à —Ä–æ—Å—Ç (–≤ —Å–º)", min_value=100, max_value=250, value=170, step=1)

# –†–∞—Å—Å—á—ë—Ç BMI
height_m = height / 100  # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ä–æ—Å—Ç–∞ –≤ –º–µ—Ç—Ä—ã
bmi = weight / (height_m ** 2)

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–≥–æ BMI
st.write(f"–í–∞—à —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ (BMI): {bmi:.1f}")

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
smoking = st.selectbox("–í—ã –∫—É—Ä–∏—Ç–µ?", ["–ù–µ—Ç", "–î–∞"])
alcohol = st.selectbox("–í—ã —É–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç–µ –∞–ª–∫–æ–≥–æ–ª—å?", ["–ù–µ—Ç", "–î–∞"])
steps = st.slider("–ß–∏—Å–ª–æ —à–∞–≥–æ–≤ –≤ –¥–µ–Ω—å", 0, 20000, 5000, step=500)
stress = st.slider("–£—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ (0 - –Ω–µ—Ç —Å—Ç—Ä–µ—Å—Å–∞, 10 - –≤—ã—Å–æ–∫–∏–π)", 0, 10, 5)

# –†–∞—Å—á—ë—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏
life_expectancy = calculate_life_expectancy(age, bmi, smoking, alcohol, steps, stress)
remaining_years = round(life_expectancy - age, 1)

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
st.subheader(f"–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–∏: {life_expectancy} –ª–µ—Ç")
st.subheader(f"–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –≥–æ–¥—ã –∂–∏–∑–Ω–∏: {remaining_years} –ª–µ—Ç")

# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
st.markdown("### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:")
recommendations = []

# BMI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
if bmi > 27:
    recommendations.append("‚ùó **–ò–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ –≤—ã—à–µ –Ω–æ—Ä–º—ã**. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∏–∂–µ–Ω–∏–µ –≤–µ—Å–∞ —á–µ—Ä–µ–∑ –∑–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏.")
    recommendations.append("[–ö—É—Ä—Å –ø–æ —Å–Ω–∏–∂–µ–Ω–∏—é –≤–µ—Å–∞ –∏ –∑–¥–æ—Ä–æ–≤–æ–º—É –ø–∏—Ç–∞–Ω–∏—é](https://www.coursera.org/learn/food-and-mood) - –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ —á–µ—Ä–µ–∑ –ø–∏—Ç–∞–Ω–∏–µ.")
elif bmi < 18.5:
    recommendations.append("‚ùó **–ò–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π**. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –≤—Ä–∞—á–æ–º –∏ —É–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤.")
else:
    recommendations.append("‚úÖ **–í–∞—à –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã**. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤–µ—Å—Ç–∏ –∑–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏.")

# –ö—É—Ä–µ–Ω–∏–µ
if smoking == "–î–∞":
    recommendations.append("‚ùó **–í—ã –∫—É—Ä–∏—Ç–µ**, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±—Ä–æ—Å–∏—Ç—å –∫—É—Ä–∏—Ç—å –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è.")
    recommendations.append("[–ö—É—Ä—Å –ø–æ –æ—Ç–∫–∞–∑—É –æ—Ç –∫—É—Ä–µ–Ω–∏—è](https://www.coursera.org/learn/quit-smoking) - –Ω–∞—É—á–∏—Ç–µ—Å—å –±—Ä–æ—Å–∞—Ç—å –∫—É—Ä–∏—Ç—å.")
else:
    recommendations.append("‚úÖ **–í—ã –Ω–µ –∫—É—Ä–∏—Ç–µ**, —á—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—é –∑–¥–æ—Ä–æ–≤—å—è –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏.")

# –ê–ª–∫–æ–≥–æ–ª—å
if alcohol == "–î–∞":
    recommendations.append("‚ùó **–ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è** –º–æ–∂–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∂–∏–∑–Ω–∏. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è.")
    recommendations.append("[–ö—É—Ä—Å –ø–æ –æ—Ç–∫–∞–∑—É –æ—Ç –∞–ª–∫–æ–≥–æ–ª—è](https://www.coursera.org/learn/alcohol-abuse) - –∫–∞–∫ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª—è.")
else:
    recommendations.append("‚úÖ **–í—ã –Ω–µ —É–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç–µ –∞–ª–∫–æ–≥–æ–ª—å**, —á—Ç–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ —Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –≤–∞—à–µ–º –∑–¥–æ—Ä–æ–≤—å–µ.")

# –®–∞–≥–∏
if steps < 5000:
    recommendations.append("‚ùó **–ú–∞–ª–æ–ø–æ–¥–≤–∏–∂–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏**. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –º–∏–Ω–∏–º—É–º 5000 —à–∞–≥–æ–≤ –≤ –¥–µ–Ω—å —É–∂–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ.")
    recommendations.append("[–ö—É—Ä—Å –ø–æ —Ñ–∏—Ç–Ω–µ—Å—É –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏](https://www.coursera.org/learn/fitness) - –∫–∞–∫ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º.")
elif 5000 <= steps <= 12000:
    recommendations.append("‚úÖ **–í—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã –ø–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**. –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!")
else:
    recommendations.append("üéØ **–í—ã –∞–∫—Ç–∏–≤–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é**! –≠—Ç–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ —Å–∫–∞–∂–µ—Ç—Å—è –Ω–∞ –≤–∞—à–µ–º –∑–¥–æ—Ä–æ–≤—å–µ.")

# –°—Ç—Ä–µ—Å—Å
if stress <= 3:
    recommendations.append("‚úÖ **–í–∞—à —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ –Ω–∏–∑–∫–∏–π**, —á—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –∑–¥–æ—Ä–æ–≤—å—é –∏ –¥–æ–ª–≥–æ–ª–µ—Ç–∏—é. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è.")
elif 4 <= stress <= 7:
    recommendations.append("‚ö†Ô∏è **–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞**. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–¥–µ–ª—è—Ç—å –≤—Ä–µ–º—è –º–µ–¥–∏—Ç–∞—Ü–∏–∏ –∏–ª–∏ –∑–∞–Ω—è—Ç–∏—è–º, —Å–Ω–∏–∂–∞—é—â–∏–º —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞.")
    recommendations.append("[–ö—É—Ä—Å –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—Ç—Ä–µ—Å—Å–æ–º](https://www.coursera.org/learn/stress-management) - –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.")
else:
    recommendations.append("‚ùó **–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞** –º–æ–∂–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ –≤–ª–∏—è—Ç—å –Ω–∞ –≤–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–º–æ—â—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –∏–ª–∏ —É—á–∞—Å—Ç–∏–µ –≤ —Ç—Ä–µ–Ω–∏–Ω–≥–∞—Ö –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—Ç—Ä–µ—Å—Å–æ–º.")
    recommendations.append("[–ö—É—Ä—Å –ø–æ –º–µ–¥–∏—Ç–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å—Ç—Ä–µ—Å—Å–æ–º](https://www.coursera.org/learn/meditation) - —Ç–µ—Ö–Ω–∏–∫–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è —Å—Ç—Ä–µ—Å—Å–∞.")

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
for recommendation in recommendations:
    st.write(recommendation)
